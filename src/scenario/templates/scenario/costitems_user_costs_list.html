{% extends 'base.html' %}

{% load static %}
{% block title %}{{ block.super }}User Costs{% endblock %}
{% block javascriptOLD %}
{% endblock %}

{% block extra_css %}
    <link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.dataTables.min.css" rel="stylesheet">
{% endblock extra_css %}

{% block navbar-left %}
    {% include "_navbar.html" with active_link="audit" %}
{% endblock navbar-left %}

{% block content %}

<div style="padding-top: 20px; vertical-align:middle; line-height: 28px" >
	<span style="font-size: 38px; float:left; ">{{ header }}</span>

	<div style="clear: both;"></div>
    <br>
</div>

  <table class="table" id="user_cost-audit-table">
    <thead>
      <tr>
        <th>Col1</th>
        <th>Col2</th>
{#        <th>User Type</th>#}
{#        <th>Project</th>#}
{#        <th>Scenario</th>#}
{#        <th>Created</th>#}
{#        <th>Last Modified</th>#}
      </tr>
    </thead>

  </table>



{% endblock %}

{% block new_extra_js %}
    {% include "./includes/extra_js.html" %}
    {% if IIS_APP_ALIAS != '' %}
        <script>
        // add the IIS Application Alias to each of the URL values
            var IIS_APP_ALIAS = "{{ IIS_APP_ALIAS }}";
            if (IIS_APP_ALIAS.length > 0) {
                for (var key in SETTINGS.URLS) {
                    SETTINGS.URLS[key] = '/' + IIS_APP_ALIAS + SETTINGS.URLS[key];
                }
            }
        </script>
    {% endif %}

    <script>
                var table;
            $(document).ready(function() {
              {#var export_columns = [0, 1, 2, 3, 4, 5, 6, 7];#}

              table = $('#user_cost-audit-table').DataTable({
                      'serverSide': true,
                      'ajax': '/api/costitemusercosts/?format=datatables', // SETTINGS.URLS.scenario_list + '?format=datatables',
                    'pageLength': 200,
                    "dom": 'Bfrtip',
                    "buttons": [
                        { 'extend': 'copy'},
                        { 'extend': 'csv'},
                        { 'extend': 'excel'},
                    ],
                  'columns': [
                      // Use dot notation to reference nested serializers.
                        {#{"data": "id", "searchable": false},#}
                        {"data": "project.user.name", "searchable": true},
                        {"data": "project.user.profile.user_type", "searchable": true},
                        {#{"data": "project.project_title", "searchable": true},#}
                        {#{"data": "scenario_title", "searchable": true},#}
                        {#{"data": "create_date", "searchable": true},#}
                        {#{"data": "modified_date", "searchable": true},#}
                  ],
                "columnDefs": [
                  {
                        "searchable": false,
                        "orderable": false,
                        "targets": 0
                  },
                ],
                  "order": [[ 1, 'asc' ]]

                      });
                  });



        table.on( 'order.dt search.dt', function () {
            table.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
            cell.innerHTML = i+1;
            t.cell(cell).invalidate('dom');
        } );
    } ).draw();
    </script>

{% endblock %}
